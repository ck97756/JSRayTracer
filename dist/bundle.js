!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){t.exports=function(){return new Worker(i.p+"worker.js")}},function(t,e,i){"use strict";i.r(e);class n{constructor(){1===arguments.length&&arguments[0]instanceof n?(this.x=arguments[0].x,this.y=arguments[0].y,this.z=arguments[0].z):3===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2]):(this.x=0,this.y=0,this.z=0)}plus(t){return new n(this.x+t.x,this.y+t.y,this.z+t.z)}minus(t){return new n(this.x-t.x,this.y-t.y,this.z-t.z)}multiply(t){return new n(this.x*t,this.y*t,this.z*t)}scaleToLength(t){let e=t/this.length();return new n(this.x*e,this.y*e,this.z*e)}normalize(){return this.scaleToLength(1)}cross(t){return new n(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}negative(){return new n(-this.x,-this.y,-this.z)}multiplyByVec3(t){return new n(this.x*t.x,this.y*t.y,this.z*t.z)}divide(t){return new n(this.x/t,this.y/t,this.z/t)}projectOnto(t){return t.multiply(this.dot(t.normalize()))}projectLength(t){return this.dot(t.normalize())}}class s{constructor(){1===arguments.length&&arguments[0]instanceof s?(this.x=arguments[0].x,this.y=arguments[0].y):2===arguments.length?(this.x=arguments[0],this.y=arguments[1]):(this.x=0,this.y=0)}divide(t){return new s(this.x/t,this.y/t)}divideByVec2(t){return new s(this.x/t.x,this.y/t.y)}multiplyByVec2(t){return new s(this.x*t.x,this.y*t.y)}floor(){return new s(Math.floor(this.x),Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}}class r{constructor(){this.position=new n,this.lookAt=new n,this.top=new n(0,0,1),this.focus=0,this.size=new s,this.canvasSize=new s}setView(t,e,i){this.position=new n(t),this.lookAt=new n(e),this.top=new n(i);let s=this.lookAt.minus(this.position);this.leftVector=this.top.cross(s).normalize(),this.topVector=s.cross(this.leftVector).normalize()}}var o=i(0),h=i.n(o);function a(){let t,e,i,n=new r;t=document.getElementById("canvas"),e=t.getContext("2d"),t.width=t.clientWidth,t.height=t.clientHeight,n.size=new s(10,10*t.height/t.width),n.canvasSize=new s(t.width,t.height),i=new Uint8ClampedArray(t.width*t.height*4),t.addEventListener("click",t=>{console.log(`position: ${t.offsetX}, ${t.offsetY}`);let i=e.getImageData(t.offsetX,t.offsetY,1,1);console.log(`color: ${i.data[0]}, ${i.data[1]}, ${i.data[2]}`)});let o=20,a=new s(Math.ceil(n.canvasSize.x/o),Math.ceil(n.canvasSize.y/o)),l=[],c=0,u=0,y=performance.now();for(let i=0;i<3;i++){let i=new h.a;i.onmessage=(t=>{if("doneRender"===t.data.type){let n=t.data.x,s=t.data.y,r=t.data.width,o=t.data.height,h=new Uint8ClampedArray(t.data.data);e.putImageData(new ImageData(h,r,o),n,s),d(i)}}),i.postMessage({type:"initial",cameraSize:new s(10,10*t.height/t.width),canvasSize:new s(t.width,t.height)}),d(i),l.push(i)}function d(t){if(c>=a.x&&(c=0,u+=1),u>=a.y){return void function(t){let e="",i=t%1e3,n=Math.floor(t/1e3),s=Math.floor(n/60),r=Math.floor(s/60),o=[Math.floor(r/24),r%=24,s%=60,n%=60];const h=["day","hour","minute","second"];let a=0;for(;a<o.length&&!(o[a]>0);a++);for(;a<o.length;a++)e=o[a]>1?`${e}${o[a]} ${h[a]}s `:`${e}${o[a]} ${h[a]} `;e=i>1?`${e}${i} milliseconds`:`${e}${i} millisecond`;console.log(e)}(performance.now()-y)}let e=o*(c+1),i=o*(u+1);c===a.x-1&&(e=n.canvasSize.x),u===a.y-1&&(i=n.canvasSize.y),t.postMessage({type:"renderRange",rangeStart:new s(o*c,o*u),rangeEnd:new s(e,i)}),c++}}document.addEventListener("DOMContentLoaded",()=>{a()},!1)}]);
//# sourceMappingURL=bundle.js.map